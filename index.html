<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />

	<title>webpack module system</title>

	<meta name="author" content="Tobias Koppers" />
	<meta name="viewport" content="width=device-width, maximum-scale=1.0, initial-scale=1.0, user-scalable=no" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,800italic,400,800,700' rel='stylesheet' type='text/css'>
	<link href="assets/style.css" rel="stylesheet" type="text/css" />
	<link href="assets/github.css" rel="stylesheet" type="text/css" />

	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="assets/jmpress.custom.min.js"></script>
	<script type="text/javascript" src="assets/highlight.pack.js"></script>

	<script type="text/javascript">
		hljs.tabReplace = '    ';
		hljs.initHighlightingOnLoad();

		$(function($) {
			$.jmpress("template", "main", {
				children: function(idx) {
					return {
						x: idx * 1200,
						y: Math.floor(Math.sin(idx * Math.PI / 8) * 1000),
						children: function(subidx) {
							return {
								y: subidx * 1000 + 1000,
								x: subidx * 500 + Math.floor(Math.sin(subidx * Math.PI / 8) * 1000)
							}
						}
					}
				}
			});
			var lastTime = new Date();
			var article = $("article");
			article.jmpress({
				stepSelector: "section",
				viewPort: {
					width: 980,
					height: 640,
					maxScale: 1
				},
				afterInit: function() {
					$("body").addClass("jmpress-initialized")
				},
				keyboard: {
					keys: {
						38: "up",
						40: "down"
					}
				},
				setActive: function(el) {
					$(".global-down")[$(el).children( "section" ).length > 0 ? "addClass" : "removeClass"]("active");
				},
				beforeChange: function(el) {
					var step = article.jmpress("active");
					if(!step) return;
					var slide = step.find("h1").first().text();
					if(!slide) return;
					var _gaq = window._gaq;
					var time = Math.min(60000, new Date() - lastTime);
					lastTime = new Date();
					if(time > 3000) {
						_gaq.push(['_trackTiming', 'Slide View', slide, time, undefined, 100]);
					}
				}
			});
			$.jmpress("register", "down", function() {
				var active = $(this).jmpress("active");
				var item = active.children( $(this).jmpress("settings").stepSelector ).first();
				if(item && item.length > 0) {
					$(this).jmpress("select", item, "next");
					var slide = active.find("h1").first().text();
					if(!slide) return;
					var _gaq = window._gaq;
					_gaq.push(['_trackEvent', 'Slide', 'Details', slide, 'Yes']);
				} else
					$(this).jmpress("next");
			});
			$.jmpress("register", "up", function() {
				var active = $(this).jmpress("active");
				var item = active.parent();
				if(item && item.length > 0 && item.is( $(this).jmpress("settings").stepSelector )) {
					$(this).jmpress("select", item, "prev");
				} else
					$(this).jmpress("prev");
			});
			$(".next").on("click", function() {
				article.jmpress("next");
				return false;
			});
			$(".prev").on("click", function() {
				article.jmpress("prev");
				return false;
			});
			$(".down").on("click", function() {
				article.jmpress("down");
				return false;
			});
			$(".home").on("click", function() {
				article.jmpress("home");
				return false;
			});
		});

		/* Non-default default flow */
		(function( $, document, window, undefined ) {

			'use strict';
			var $jmpress = $.jmpress;

			/* FUNCTIONS */
			function prevOrNext( jmpress, step, eventData, prev) {
				if (!step) {
					return false;
				}
				var stepSelector = eventData.settings.stepSelector;
				step = $(step);
				do {
					var item = step[prev?"prevAll":"nextAll"](stepSelector).first();
					if(!item || item.length == 0) item = step.near( stepSelector, prev );
					if (item.length === 0 || item.closest(jmpress).length === 0) {
						item = $(jmpress).find(stepSelector)[prev?"last":"first"]();
					}
					if (!item.length) {
						return false;
					}
					step = item;
				} while( step.data("stepData").exclude );
				return step;
			}

			/* HOOKS */
			$jmpress( 'selectPrev', function( step, eventData ) {
				return prevOrNext(this, step, eventData, true);
			});
			$jmpress( 'selectNext', function( step, eventData ) {
				return prevOrNext(this, step, eventData);
			});
		}(jQuery, document, window));

		/* jmpress-choose-route plugin */
		$.jmpress("beforeChange", function(el, eventData) {
			if(eventData.reason != "next") return;
			var chooser = null;
			$(".jmpress-choose-route").each(function() {
				if(el.is($(this).data("slice")) && ($(this).is(":checked") ^ !!$(this).data("invert")))
					chooser = $(this);
			});
			if(chooser) {
				eventData.cancel();
				$(eventData.jmpress).jmpress("select", chooser.data("goto"), "next");
			}
		});
		$(function() {
			$(".jmpress-choose-route").each(function() {
				var item = $(this);
				function update() {
					var checked = item.is(":checked");
					var className = item.data("class");
					$("." + className + "-on").toggle(!!checked);
					$("." + className + "-off").toggle(!checked);
					$("." + className + "-class").removeClass(checked?"off":"on").addClass(checked?"on":"off");
				}
				update();
				item.on("change", update);
			});
		});
	</script>
</head>
<body>

<div class="global-wip">
	<h1>Work In Progress</h1>
	<p>While <code>webpack</code> is some kind of mature, this presentation is wip!</p>
</div>

<article data-template="main">

	<section id="home">
		<center><a href="https://github.com/webpack/webpack"><img src="assets/logo.png" /></a></center>
		<p>Hi, I'm a <strong>module system</strong> for the browser.</p>
		<p>You like to get know me? I'll tell you more.</p>
		<p data-jmpress="fade after 700ms step" class="jmpress-only">You can navigate through this website with</p>
		<ul class="jmpress-only">
		<li data-jmpress="fade after 500ms">your arrow keys (&larr;, &rarr;),</li>
		<li data-jmpress="fade after 500ms">the space bar or</li>
		<li data-jmpress="fade after 500ms">the buttons on the left and the right of the screen.</li>
		</ul>
		<p data-jmpress="fade after 1s" class="jmpress-only">Yeah. Ready to get to know webpack: Go <strong>right</strong> &rarr;!
	</section>

	<section id="customize" class="jmpress-only">
		<h1>Customize the content</h1>
		<p>Answer these few questions so <br/>I can present you relevant stuff only:</p>
		<p class="smaller">(or just skip them, than I'll show you all stuff)</p>
		<ul>
			<li>Are you a <code>javascript</code> developer? If not, leave this website, the content is not relevant to you.</li>
			<li>Do you know <code>node.js</code>? I hope so. Elsewise read <a href="http://nodejs.org" target="_blank">nodejs.org</a>.</li>
			<li>Do you know <code>CommonJS</code> and <code>AMD</code>? <input type="checkbox" class="jmpress-choose-route" data-slice="#module-system-style" data-goto="#existing-module-systems" data-class="commonjs"/>. Elsewise I've some slides for you.</li>
			<li>Do you know <code>browserify</code>? <input type="checkbox" class="jmpress-choose-route" data-slice="#comparison-browserify" data-goto="#comparison-requirejs" data-class="browserify" data-invert="yes" checked="checked"/>. I'll show you the differences.</li>
			<li>Do you know <code>require.js</code>? <input type="checkbox" class="jmpress-choose-route" data-slice="#comparison-requirejs" data-goto="#usage-cli" data-class="requirejs" data-invert="yes" checked="checked"/>. I'll compare it with me to.</li>
			<!--
			<li>Do you know <code>jade</code> templating language? <input type="checkbox" class="jmpress-choose-route" data-slice="#xxx" data-goto="#xxx" data-class="jade" checked="checked"/>. I'll show you how to use it with me.</li>
			<li>Do you know <code>less</code> stylesheets? <input type="checkbox" class="jmpress-choose-route" data-slice="#xxx" data-goto="#xxx" data-class="less" checked="checked"/>. I'll explain why you can use it with just one line.</li>
			<li>Do you know <code>coffeescript</code>? <input type="checkbox" class="jmpress-choose-route" data-slice="#xxx" data-goto="#xxx" data-class="coffeescript" checked="checked"/>. I'll prove that you can use it as full replacement of js.</li>
			<li>Do you know <code>express</code> server? <input type="checkbox" class="jmpress-choose-route" data-slice="#xxx" data-goto="#xxx" data-class="express" checked="checked"/>. I've some slide showing how to integrate the dev tools.</li>
			-->
		</ul>
	</section>

	<section id="content">
		<h1>Content</h1>
		<ul>
		<li><a href="#motivation">Todays Web Apps: Motivation</a></li>
		<li class="commonjs-class strike-if-on"><a href="#module-system-style">Module system styles</a></li>
		<li><a href="#existing-module-systems">Existing module systems</a></li>
		<li><a href="#transferring">Transferring. Simple concatination?</a></li>
		<li><a href="#only-js">Why only javascript? More static resources.</a></li>
		<li><a href="#loaders">Loaders</a></li>
		<li><a href="#dynamic-require">Contexts</a></li>
		<li class="browserify-class strike-if-off"><a href="#comparison-browserify">Differences to <code>browserify</code></a></li>
		<li class="requirejs-class strike-if-off"><a href="#comparison-requirejs">Differences to <code>require.js</code></a></li>
		<li><a href="#usage-cli">Usage</a></li>
		<li><a href="#dev-tools">Dev Tools</a></li>
		<li><a href="#rich-list">More features</a></li>
		</ul>
	</section>

	<section id="motivation">
		<h1>Todays Web Apps: Motivation</h1>
		<p>Today websites are evolving into web apps:</p>
		<ul>
		<li>More and more javascript is in a page.</li>
		<li>One can do more stuff in modern browsers.</li>
		<li>Less full page reloads &rarr; even more code in a page.</li>
		</ul>
		<p>&rarr; Much code on client side!</p>
		<h2>Module system</h2>
		<p>A big code base need to be organized!</p>
		<p>Module systems offer mechanism to split your code base into modules.</p>
	</section>

	<section id="module-system-style">
		<h1>Module system styles</h1>
		<p>Using a module system is common, so there is a standard. But of course there is not only one standard. There are multiple different standards:</p>
		<ul>
		<li><code>&lt;script&gt;</code>-tag style</li>
		<li>CommonJS</li>
		<li>AMD and some dialects of it</li>
		<li>...</li>
		<ul>
	</section>

	<section id="style-tag-style">
		<h1><code>&lt;script&gt;</code>-tag style</h1>
<pre class="language-html"><code>&lt;script src="module1.js"&gt;&lt;/script&gt;
&lt;script src="module2.js"&gt;&lt;/script&gt;
&lt;script src="libaryA.js"&gt;&lt;/script&gt;
&lt;script src="module3.js"&gt;&lt;/script&gt;</code></pre>
		<p>Modules export a interface to the global object, i. e. <code>window</code>.</p>
		<h3>Common problems:</h3>
		<ul>
		<li>Conflicts in the global object</li>
		<li>Order is important</li>
		<li>Developer have to resolve dependencies of thrid-party modules/libaries</li>
		<li>In big projects the list can get really long, difficult to manage</li>
		</ul>
	</section>


	<section id="commonjs-style">
		<h1>CommonJS: synchron require</h1>
		<p>This is the style you use in <code>node.js</code> on server side.</p>
		<pre class="language-javascript"><code>require("module"); require("../file.js");</code></pre>
		<h3>Pro</h3>
		<ul>
		<li>Reuse server-side modules, npm</li>
		<li>There are already many modules in this style</li>
		<li>very simple</li>
		</ul>
		<h3>Contra</h3>
		<ul>
		<li>blocking calls do not apply well on networks. Requests are asynchronous.</li>
		<li>No parallel require of multiple modules</li>
		</ul>
	</section>


	<section id="amd-style">
		<h1>AMD: asynchronous require</h1>
		<p><code>Asynchronous Module Definition</code></p>
		<p>Other module systems had problems with the synchronous require and introduced a asynchronous require:</p>
		<pre class="language-javascript"><code>require(["module", "../file.js"], function(modules, file) { /*...*/ });
define("mymodule", ["dep1", "dep2"], function(d1, d2) { /*...*/ });</code></pre>
		<h3>Pro</h3>
		<ul>
		<li>Fits the asynchronous request style</li>
		<li>Parallel loading of multiple modules</li>
		</ul>
		<h3>Contra</h3>
		<ul>
		<li>Coding overhead</li>
		<li>Seem to be some kind of workaround</li>
		</ul>
	</section>

	<section id="existing-module-systems">
		<h1>Existing module systems</h1>
		<h3>CommonJS</h3>
		<ul>
		<li><a target="_blank" href="http://nodejs.org">node.js</a> - only server-side</li>
		<li><a target="_blank" href="https://github.com/substack/node-browserify">browserify</a> - compile to one bundle</li>
		<li><a target="_blank" href="https://github.com/medikoo/modules-webmake">modules-webmake</a> - compile to one bundle</li>
		<li><a target="_blank" href="https://github.com/substack/wreq">wreq</a> - fully client-side</li>
		</ul>
		<p class="browserify-on">As you know browserify, I'll compare it to me on a later slide.</p>
		<h3>AMD</h3>
		<ul>
		<li><a target="_blank" href="http://requirejs.org/">require.js</a> - fully client-side</li>
		<li><a target="_blank" href="https://github.com/cujojs/curl">curl</a> - fully client-side</li>
		</ul>
		<p class="requirejs-on">You know require.js, which will be compared to me later.</p>
	</section>

	<section id="transferring">
		<h1>Transferring. Simple concatination?</h1>
		<p>Modules should be executed on the client, so they must be transferred.</p>
		<p>There are two extremas how to split requests/files to modules:</p>
		<ul>
		<li>1 request/file per module (i. e. <code>require.js</code> in dev mode)</li>
		<li>All modules in a request/file (i. e. <code>browserify</code>, <code>require.js</code> bundled)</li>
		</ul>
		<p>Both are used in the wild (preferable the second one), but both are suboptimal:</p>
		<ul>
		<li>If there is a request/file per module,
			<ul>
			<li>only required modules are transferred,</li>
			<li>but there are many requests which means much overhead.</li>
			</ul></li>
		<li>If there is 1 request/file with all modules,
			<ul>
			<li>it would be less overhead,</li>
			<li>but not (yet) required modules are transferred too.</li>
			</ul></li>
		</ul>
	</section>

	<section id="transferring-flexible">
		<h1>Transferring. A flexible solution</h1>
		<p>A more flexible transferring is better.</p>
		<p>&rarr; Chunked concatination</p>
		<ul>
		<li>Split the code base into multiple smaller requests/files/chunks.</li>
		<li>Transfer chunks on demand.</li>
		<li>The split points are up to you as developer.</li>
		<li>This make me really flexible and useable for big code bases.</li>
		<li>It's optional to use. You may don't need it for small projects.</li>
		</ul>
		<p class="smaller">Note: <a href="https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting" target="_blank">The idea is from Google's GWT</a>. A Google developer also recently implemented a similar system for AMD-style modules: <a href="https://github.com/google/module-server" target="_blank">google/module-server</a>, but it depends on a server-side component.</p>
		<p class="smaller jmpress-only">I've some slides with more details on my output format. Use the down array (&darr;) to navigate to them or use the DETAILS button on the right side.</p>

		<section id="existing-output-format">
			<h1>Existing output formats</h1>
			<p>Other module systems/bundler emit much code into the output file for path resolution logic:</p>
			<p class="smaller">i. e. modules-webmake</p>
			<pre class="language-javascript"><code>// some lines of the modules system
// many lines of the path resolution logic
{
	"folder": {
		"fileA": function of module A,
		"fileB": function of module B
	},
	"fileC": function of module C
}
("./fileC") // Startup</code></pre>
		</section>

		<section id="existing-output-format-ii">
			<h1>Existing output formats (Con't)</h1>
			<p>And a module looks like this:</p>
			<pre class="language-javascript"><code>function(exports, module, require) {
	// The file
	module.exports = require("./folder/fileA");
}</code></pre>
			<p>This format cause some trouble:</p>
			<ul>
			<li>Your path names are in the output file.</li>
			<li>The client need to do the module resolution.</li>
			<li>Overhead though string like <code>"./folder/fileA"</code>.</li>
			<li>Code for the path resolution must be emitted into the output file.</li>
			</ul>
			<p>I can do better.</p>
		</section>

		<section id="my-output-format">
			<h1>How can I do better?</h1>
			<ul>
			<li>I don't want the client to do the path resolution and do it while compiling.</li>
			<li>I don't want to expose path information and replace the strings with small numbers.</li>
			</ul>
			<pre class="language-javascript"><code>// some lines of the modules system
{
	0: function of module C,
	1: function of module A,
	2: function of module B
}</code></pre>
			<p>with <code>function of module</code>:</p>
			<pre class="language-javascript"><code>function(exports, module, require) {
	// The file
	module.exports = require(0);
}</code></pre>
			<p>I ever start on module <code>0</code> to save the startup call.</p>
		</section>

		<section id="my-output-format-ii">
			<h1>My output format</h1>
			<p>My output format make the client-side really simple. On the next slide I include the complete module system, because it's so small that it fits on a slide ;)</p>
			<h3>Pro</h3>
			<ul>
			<li>Smaller, Faster, Simplier</li>
			<li>No paths exposed. No path resolution on client side.</li>
			<li>Less overhead.</li>
			</ul>
			<h3>Contra</h3>
			<ul>
			<li>Complexer compilation.</li>
			<li>Source is modified (a little bit). Comments? Source Maps?</li>
			<li><code>module.id</code> is not longer a string, but a number.</li>
		</section>

		<section id="webpack-overhead">
			<pre class="language-javascript"><code>(function(modules) { /* Sorry, no space for comments... */
    var installedModules = {};
    function require(moduleId) {
        if(installedModules[moduleId])
            return installedModules[moduleId].exports;
        var module = installedModules[moduleId] =
            { exports: {}, id: moduleId, loaded: false };
        modules[moduleId].call(null, module, module.exports, require);
        module.loaded = true;
		return module.exports;
    }
    require.e = function requireEnsure(chunkId, callback) {
        callback(require);
    }; // chunk loading, don't care for it now.
    require.modules = modules;
    require.cache = installedModules;
    return require(0);
})({ /* the modules */ })</code></pre>
		</section>

	</section>

	<section id="require-ensure">
		<h1>Split points</h1>
		<p>"Ok cool, but how can I set split points to use chunked transferring"</p>
		<ul>
		<li>Use AMD-style <code>require</code>, or</li>
		<li>use the <code>require.ensure</code> function.</li>
		</ul>
		<p class="requirejs-off">I explain only the <code>require.ensure</code> function. You'll find documentation on AMD-style <code>require</code> in the <a href="http://requirejs.org/docs/api.html#packages" target="_blank">require.js API</a>.</p>
		<pre class="language-javascript"><code>require.ensure(modules: string[], callback: (require) => void)</code></pre>
		<ul>
		<li><code>modules</code> is a list of modules that are included in the chunk additically to the dependencies in the <code>callback</code> function.</li>
		<li><code>callback</code> function with code to run after the chunk was loaded. Calls to <code>require</code> in the function's body are parsed and placed into the chunk.</li>
		</ul>
		<p>You'll find an example on the next slide</p>
	</section>

	<section id="require-ensure-example">
		<h1>Code Splitting</h1>
		<pre class="language-javascript"><code>var a = require("a");
var b = require("b");
require.ensure(["c"], function(require) {
    require("b").xyz();
    var d = require("d");
});</code></pre>
		<p class="smaller">File/Chunk 1: <code>bundle.js</code></p>
		<ul>
		<li>code of that file</li>
		<li>code of module a and dependencies</li>
		<li>code of module b and dependencies</li>
		</ul>
		<p class="smaller">File/Chunk 2: <code>1.bundle.js</code> (loaded when calling <code>require.ensure</code>)</p>
		<ul>
		<li>code of module c and dependencies (but code is not used)</li>
		<li>code of module d and dependencies</li>
		</ul>

		<section id="output-format-code-splitting">
			<h1>Output format with multiple chunks</h1>
			<p>If you use Code Splitting the first chunk includes some code to add the other chunks on demand.</p>
			<p class="smaller">I change your calls of <code>require.ensure</code> to calls to <code>require.e</code> (shorter is better) with a chunk id to load. A chunk is loaded by adding a <code>&lt;script&gt;</code>-tag (so it's cross-origin) and callback is called by the JSONP-call the chunk contains.</p>
			<p>To sum it up, we have:</p>
			<ul>
			<li>Code to add <code>&lt;script&gt;</code>-tag in initial chunk</li>
			<li>JSONP callback in initial chunk</li>
			<li>Other chunks contain only a call to the JSONP function.</li>
			</ul>
		</section>

		<section id="output-format-chunk">
			<h1>Output format of a chunk</h1>
			<pre class="language-javascript"><code>webpackJsonp(1 /* chunk id */, {
    3: function(module, exports, require) { /* the module */ },
    4: function(module, exports, require) { /* the module */ },
    6: function(module, exports, require) { /* the module */ },
	/* ... */
})</code></pre>
			<p>which minimizes great:</p>
			<pre class="language-javascript"><code>webpackJsonp(1,{3:function(a,b,c){},4:function(a,b,c){},/* ... */})</code></pre>
			<h3>Contra</h3>
			<ul>
			<li>Mulitple instances of webpack module systems can conflict if they use the same JSONP-callback name. You can specify the callback name as option.</li>
			</ul>
		</section>
	</section>

	<section id="only-js">
		<h1>Why only javascript?</h1>
		<p>Why should I only help you with javascript? There are so much more static resources:</p>
		<ul>
		<li>stylesheets</li>
		<li>images</li>
		<li>webfonts</li>
		<li>html for templating</li>
		<li>etc.</li>
		</ul>
		<p>And also:</p>
		<ul>
		<li>coffeescript &rarr; javascript</li>
		<li>less stylesheets &rarr; css stylesheets</li>
		<li>jade templates &rarr; javascript which generates html</li>
		<li>i18n files &rarr; something</li>
		<li>big etc.</li>
		</ul>
	</section>

	<section id="not-only-js">
		<h1>Why only javascript? (Con't)</h1>
		<p>I help you!</p>
		<pre class="language-javascript"><code>require("./style.css");</code></pre>
		<p>That's cool.</p>
		<pre class="language-javascript"><code>require("./style.less");
require("./template.jade");
require("./image.png");</code></pre>
		<p>Even cooler!</p>
		<p>You don't need to put your files though some preprocessing manually. I do it for you and it is very easy to use (As you see from the lines above).</p>
		<p class="smaller">Important note for you as developer: Yes you can extend it very easily. You can use your favorite templates/stylesheets/scripts/whatever.</p>
	</section>

	<section id="loaders">
		<h1>Loaders</h1>
		<p>"Ok cool, but what is the technique behind it?"</p>
		<p>It's called <strong>loaders</strong>.</p>
		<p>A loader...</p>
		<ul>
		<li>... is a javascript function preprocessing a file.</li>
		<li>... is running in <code>node.js</code>, so possibilities are endless.</li>
		<li>... can be piped together with other loaders, but the last loader should emit javascript.</li>
		<li>... can opt-in for optional execution in a seperate process (cpu-heavy stuff).</li>
		<li>... can be passed options.</li>
		<li>... can be published/installed though <code>npm</code>.</li>
		<li>... can be asynchronous.</li>
		<li>... can be bound to extensions/RegExps.</li>
		<li>... can emit files.</li>
		</ul>
		<pre class="language-javascript"><code>require("your-loader!./your-file.xyz");
require("./loader.js!./loader2.js!module/with/a/file");</code></pre>

		<section id="simple-loader">
			<h1>A simple loader</h1>
			<p><code>loader.js</code></p>
			<pre class="language-javascript"><code>module.exports = function(js) {
	return "exports.answer = 42;\n" + js;
}</code></pre>
			<p><code>file.js</code></p>
			<pre class="language-javascript"><code>exports.test = "test";</code></pre>
			<p>Result:</p>
			<pre class="language-javascript"><code>var loadedFile = require("./loader!./file");
assert(loadedFile.test === "test");
assert(loadedFile.answer === 42);</code></pre>

		</section>

		<section id="async-loader">
			<h1>A asynchronous loader</h1>
			<p>Here is an example for an asynchronous loader accessing the <code>node.js</code> APIs:</p>
			<pre class="language-javascript"><code>// loader.js
var fs = require("fs");
var path = require("path");
module.exports = function(js) {
	var done = this.async();
	var headerPath = path.join(__dirname, "header.js");
	fs.readFile(headerPath, "utf-8", function(err, header) {
		if(err) return done(err);
		done(null, header + js);
	});
}</code></pre>
			<p><a href="https://github.com/webpack/webpack/wiki/Loader-Specification" target="_black">&rarr; Loader specification</a></p>
		</section>
	</section>

	<section id="included-loaders">
		<h1>Some loader examples</h1>
		<p>Here is a small part of <a href="https://github.com/webpack/docs/wiki/loader-list" target="_black">this loaders list</a>:</p>
		<ul>
		<li>Basic: <code>json</code>, <code>raw</code>, <code>worker</code> (WebWorker)</li>
		<li>Styling: <code>css</code>, <code>less</code>, <code>style</code></li>
		<li>Templates: <code>jade</code></li>
		<li>Languages: <code>coffee</code></li>
		<li>Support: <code>mocha</code>, <code>jshint</code></li>
		</ul>
		<p>Some of them may be bound to file extensions if you choose to.</p>
		<p>Feel free to write your own loaders.</p>
		<p>If you open source your own loaders consider adding them to the list.</p>
	</section>

	<section id="dynamic-require">
		<h1>Dynamic require</h1>
		<p>So now all is javascript. So I can show you more of mine javascript features.</p>
		<pre class="language-javascript"><code>return require("./template/" + templateName + ".jade");</code></pre>
		<p>Module bundlers do a static code analysis to get dependencies before executing. But this code fragment includes a variable (not compile-time constant). Does the static code analysis fails here?</p>
		<p class="smaller browserify-on">Note: browserify simply ignore the require and hopes that the files are in the bundle. Because in most cases they are not, you need to force including.</p>
		<p class="smaller requirejs-on">Note: require.js TODO check how exactly require.js fails on this.</p>
	</section>

	<section id="context">
		<h1>Context</h1>
		<p>I handle this cases with a special mechanism I call "context". All files matching the require are included in the bundle and I find the actual referenced file on runtime.</p>
		<ul>
		<li>It is possible to use loaders with contexts.</li>
		<li>In the most cases contexts are transparent for the developer und just work.</li>
		<li>Limitation: It is assumed that non-compile-time-constant parts do not contain any <code>"/../"</code>.</li>
		<li>Common Problem: Maybe to many files are included. This may not be your intent.</li>
		<li>The <code>?:</code>-operation do not create a context.</li>
		<li>Copying the require function into another variable creates a context for the current directory.
			<ul><li>There is a warning in this case.</li></ul>
		</li>
		<li>Files with errors are not included. There is a warning in this case.</li>
		<li>You can create a context also with <code>require.context(path, recursive, regExp)</code>.
			<ul>
			<li>It return a function to require from that folder.</li>
			<li>The function has a method <code>.keys()</code> returning all possible parameters.</li>
			</ul>
		</li>
		</ul>

		<section id="context-details">
			<h1>Emitted modules</h1>
			<p>For each context a context module is emitted, which contains a map of files in the context and code for finding the correct file.</p>
			<p class="smaller">i. e. a <code class="language-javascript">require("./template/" + templateName + ".jade")</code> may result in a map like that: (emitted with lookup code in module 22)</p>
			<pre class="language-javascript"><code>{	// string: module id
	"./templateA.jade": 23,
	"./templateB.jade": 24,
	"./more/templateC.jade": 25
}</code></pre>
			<p class="smaller">... and the require converted to:</p>
			<pre class="language-javascript"><code>require(22)("./" + templateName + ".jade")</code></pre>
			<p>The files (modules 23 - 25) are included like any require.</p>
		</section>
	</section>

	<section id="comparison">
		<h1>Comparison to other module systems</h1>
		<p>I'm not alone. There are multiple other module systems out there.</p>
		<p>Here are the three top points I do better than others:</p>
		<ul>
		<li>Code Splitting</li>
		<li>Support of CommonJS and AMD</li>
		<li>Configuration</li>
		</ul>
		<div class="browserify-on">
			<p>On the next slide you'll find a comparision to browserify.</p>
			<p class="requirejs-on">After that comparision you'll also find a comparision to require.js.</p>
		</div>
		<div class="browserify-off">
			<p class="requirejs-on">On the next slide you'll find a comparision to require.js.</p>
		</div>
	</section>

	<section id="comparison-browserify">
		<h1>Comparison to browserify</h1>
		<table class="compare">
		<thead><tr><th>browserify</th><th>webpack</th></tr></thead>
		<tbody>
			<tr>
				<td class="">only CommonJS sync require</td>
				<td class="plus">also AMD-style require</td>
			</tr>
			<tr>
				<td class="">single bundle</td>
				<td class="plus">Code Splitting</td>
			</tr>
			<tr>
				<td class="">&mdash;</td>
				<td class="plus">many kinds of expressions in <code>require</code></td>
			</tr>
			<tr>
				<td class="">plugins</td>
				<td class="">loaders</td>
			</tr>
			<tr>
				<td class="plus">replacements for node.js buildin libaries</td>
				<td class="">replacements for node.js buildin libaries</td>
			</tr>
			<tr>
				<td class="">include some path info</td>
				<td class="plus">don't include path info</td>
			</tr>
			<tr>
				<td class="">replacements by alias option</td>
				<td class="plus">by alias option, extension or folder</td>
			</tr>
			<tr>
				<td class="">no minimize</td>
				<td class="plus">minimize with uglifyjs</td>
			</tr>
			<tr>
				<td class="plus">~ 220b overhead (+ 25b per module)</td>
				<td class="plus">~ 240b overhead (+ 19b per module)</td>
			</tr>
		</tbody>
		</table>
		<p><a href="https://github.com/webpack/webpack/wiki/Comparison" target="_black">&rarr; Details</a></p>
		<p class="smaller">no guarantee for correctness</p>
	</section>

	<section id="comparison-requirejs">
		<h1>Comparison to require.js</h1>
		<table class="compare">
		<thead><tr><th>require.js</th><th>webpack</th></tr></thead>
		<tbody>
			<tr>
				<td class="">only AMD-style require and wrapped sync require</td>
				<td class="plus">also CommonJS sync require</td>
			</tr>
			<tr>
				<td class="">request per file* or single bundle**</td>
				<td class="plus">Code Splitting</td>
			</tr>
			<tr>
				<td class="plus">any expression in async <code>require</code>*</td>
				<td class="">many kinds of expressions in <code>require</code></td>
			</tr>
			<tr>
				<td class="">no replacements for node.js buildin libaries</td>
				<td class="plus">replacements for node.js buildin libaries</td>
			</tr>
			<tr>
				<td class="">include some path info</td>
				<td class="plus">don't include path info</td>
			</tr>
			<tr>
				<td class="">replacements by config option</td>
				<td class="plus">by alias option, extension or folder</td>
			</tr>
			<tr>
				<td class="plus">requires modules from any web path*</td>
				<td class="">only modules from filesystem</td>
			</tr>
			<tr>
				<td class="plus">minimize with uglifyjs or closure compiler**</td>
				<td class="">minimize with uglifyjs</td>
			</tr>
			<tr>
				<td class="minus">~ 14.5kb overhead (+ 19b per module)</td>
				<td class="plus">~ 240b overhead (+ 19b per module)</td>
			</tr>
		</tbody>
		</table>
		<p><a href="https://github.com/webpack/webpack/wiki/Comparison" target="_black">&rarr; Details</a></p>
		<p>* unoptimized</p>
		<p>** optimized</p>
		<p class="smaller">no guarantee for correctness</p>
	</section>

	<section id="usage-cli">
		<h1>Usage (CLI)</h1>
		<p>Using me is very easy. I assume that you have node.js installed.</p>
		<p>You can install the cli:</p>
		<pre><code>npm install webpack -g</code></pre>
		<p>Typing <code>webpack</code> will show the possible options for the cli.</p>
		<p>Compiling is so easy:</p>
		<pre><code>webpack ./entryFile.js outputBundle.js</code></pre>
		<p>A bit cooler is it with some options
		<pre><code>webpack ./entryFile.js outputBundle.js --watch --colors --progress --cache</code></pre>
		<p>That recompiles on change, prints status information and with colorful output. It automatically caches unchanged files.</p>
	</section>

	<section id="usage-config">
		<h1>Usage (config)</h1>
		<p>You may create a <code>webpack.config.js</code> file to specify your options. If you do so you can compile with:</p>
		<pre><code>webpack</code></pre>
		<p>The <code>webpack.config.js</code> file may look like this:</p>
		<pre><code class="language-javascript">var path = require("path");
module.exports = {
	context: __dirname,   entry: "./entryFile.js",
	output: {
		path: path.join(__dirname, "assets"),
		publicPath: "http://cdn.example.com/assets/",
		filename: "[hash].bundle.js" },
	cache: true
};</code></pre>
	</section>

	<section id="usage-node">
		<h1>Usage (node.js)</h1>
		<p>You can also use me from your node.js code.</p>
		<pre><code class="language-javascript">var webpack = require("webpack");
webpack({
	context: __dirname,
	entry: "./entryFile.js",
	output: {
		path: path.join(__dirname, "assets"),
		publicPath: "http://cdn.example.com/assets/",
		filename: "[hash].bundle.js"
	},
	cache: true
}, function(err, stats) {
	// ...
});</code></pre>
	</section>

	<section id="dev-tools">
		<h1>Dev Tools</h1>
		<p>Because I know that dev tools are very important, there are some dev tools availible:</p>
		<p class="smaller">More details on the next slides.</p>
		<ul>
		<li><code>--debug</code> or <code>debug:true</code>: Switch loaders into debug mode. (i. e. the jade loader includes line numbers and the source code for good error messages)</li>
		<li><code>--devtool eval</code> or <code>devtool:"eval"</code>: Emits <code>//@ SourceURL</code> comments for debugging support. Try Chrome Dev Tools (or Firebug).</li>
		<li><code>webpack-dev-middleware</code>: middleware for express.</li>
		<li><code>webpack-dev-server</code>: express server with auto-refresh.</li>
		<!--<li><code>webpack-graph</code>: visualize your dependency graph as svg.</li>-->
		</ul>
	</section>

	<section id="dev-tool-middleware">
		<h1>Dev Tool: express middleware</h1>
		<p>The dev-middleware can be used in development combined with my watch mode.</p>
		<ul>
		<li>Compilation in memory. No file write access.</li>
		<li>Requests block until compilation is done. You'll ever use the newest bundle.</li>
		</ul>
		<p>It seem to be very simple, but is very useful!</p>
		<p>You'll find <a href="https://github.com/webpack/webpack-dev-middleware" target="_black">webpack-dev-middleware here</a>.</p>
	</section>

	<section id="dev-tool-server">
		<h1>Dev Tool: webpack express server</h1>
		<p>The dev-server uses the dev-middleware to serve a compiled webpack bundle. It also forwards some events emitted by me to the browser, which updates the page or display errors.</p>
		<p>Very cool. Just leave a browser window open. It will reflect changes made automatically.</p>
		<p>You'll find <a href="https://github.com/webpack/webpack-dev-server" target="_black">webpack-dev-server here</a>.</p>
	</section>

	<section id="rich-list">
		<h1>Rich list of more features</h1>
		<ul>
		<li>I can add a hash of the bundle content to the filename for better <strong>http caching</strong>.</li>
		<li>Try <code>enhanced-require</code> to use loaders, contexts, etc. in <strong>node.js</strong>.</li>
		<li>There is a <strong>grunt</strong> task (<code>grunt-webpack</code>) to include me in your build process.</li>
		<li>I have <strong>many config options</strong>. You can customize me to fit to your imagination.</li>
		<li>I can <strong>cache</strong> previous module results to support faster re-compilation.</li>
		<li>I have some browser replacement for <strong>node.js buildin libaries</strong> included.</li>
		<li>You have various options to apply <strong>browser replacements</strong> for anything.</li>
		<li>I have a rich plugin system to enhance me with your custom stuff.</li>
		<li>I can compile multiple entry points with shared chunks for multi page apps.</li>
		</ul>
	</section>

	<section id="examples">
		<h1>Rich list of <a href="https://github.com/webpack/webpack/tree/master/examples">examples</a></h1>
		<ul>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/commonjs">CommonJs</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/labeled-modules">Labeled Modules</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/mixed">Mixed: CommonJs, AMD and Labeled Modules</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/code-splitting">Code Splitting</a>, <a href="https://github.com/webpack/webpack/tree/master/examples/code-splitting-bundle-loader">with bundle loader</a> and <a href="https://github.com/webpack/webpack/tree/master/examples/named-chunks">named Chunks</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/require.resolve">require.resolve</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/require.context">require.context</a>, <a href="https://github.com/webpack/webpack/tree/master/examples/code-splitted-require.context">with Code Splitting</a> and <a href="https://github.com/webpack/webpack/tree/master/examples/code-splitted-require.context-amd">with AMD</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/loader">Loader</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/coffee-script">Coffeescript</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/web-worker">WebWorker</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/i18n">Localization</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/component">component</a></li>
		<li><a href="https://github.com/webpack/webpack/tree/master/examples/dedupe">Deduplication</a> and <a href="https://github.com/webpack/webpack/tree/master/examples/code-splitted-dedupe">with Code Splitting</a></li>
		</ul>
	</section>

	<section id="">
		<h1>WIP</h1>
		<p>These webpack features are WIP on this presentation</p>
		<ul>
		<li>jade usage</li>
		<li>less usage</li>
		<li>coffeescript usage</li>
		<li>Pull Requests are welcome: Additional info and/or fixes</li>
		</ul>
	</section>

</article>

<div class="jmpress-only global-prev prev"></div>
<div class="jmpress-only global-next next"></div>
<div class="jmpress-only global-down down">DETAILS</div>

<footer><p>
	<g:plusone href="http://webpack.github.com/"></g:plusone>
</p></footer>

<script type="text/javascript">

(function() {
	var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
	po.src = 'https://apis.google.com/js/plusone.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35439060-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>